<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›³é‘‘ãƒªã‚¹ãƒˆ | Guide to Humans</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0d1117; color: #e6edf3; font-family: 'Helvetica Neue', Arial, sans-serif; }
        .emerald-glow { box-shadow: 0 0 15px rgba(16, 185, 129, 0.1); }
        .tag-badge { background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.3); }
    </style>
</head>
<body class="p-6 max-w-md mx-auto min-h-screen flex flex-col">
    <header class="mb-8 flex items-center justify-between">
        <button onclick="location.href='index.html'" class="text-emerald-400 font-bold hover:brightness-125 transition-all">
            â† æ‹ ç‚¹ã¸æˆ»ã‚‹
        </button>
        <h2 class="text-xl font-bold tracking-widest text-emerald-500">COLLECTION</h2>
    </header>

    <main id="collection-list" class="space-y-6 flex-1">
        </main>

    <footer class="mt-12 text-center text-gray-600 text-[10px] tracking-widest uppercase">
        &copy; Human Observation Project
    </footer>

    <script>
    // ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿
    let collections = JSON.parse(localStorage.getItem('gth_collections') || '[]');
    const container = document.getElementById('collection-list');

    function renderList() {
        container.innerHTML = ""; 

        if (collections.length > 0) {
            collections.forEach((item, index) => {
                // å±æ€§ã‚¿ã‚°ãŒã€Œ / ã€ã§åŒºåˆ‡ã‚‰ã‚Œã¦ã„ã‚‹å ´åˆã€é…åˆ—ã«åˆ†è§£ã—ã¦ãƒãƒƒã‚¸åŒ–ã—ã¾ã™
                const tags = item.tag.split(' / ');
                const tagHtml = tags.map(t => `<span class="tag-badge text-[10px] text-emerald-400 px-2 py-0.5 rounded-full mr-1 mb-1 inline-block">${t}</span>`).join('');

                const card = document.createElement('div');
                card.className = "bg-gray-800/50 p-5 rounded-2xl border border-emerald-500/20 emerald-glow transition-all active:scale-[0.98]";
                card.innerHTML = `
                    <div class="mb-3">
                        <div class="flex flex-wrap mb-2">
                            ${tagHtml}
                        </div>
                        <div class="text-xl font-bold text-white flex items-center">
                            <span class="w-1.5 h-1.5 bg-emerald-500 rounded-full mr-2 animate-pulse"></span>
                            ${item.nickname}
                        </div>
                    </div>
                    
                    <div class="flex justify-between items-center mt-4 pt-4 border-t border-gray-700/50">
                        <div class="text-[9px] text-gray-500 font-mono">
                            ID: ${String(index + 1).padStart(3, '0')}<br>
                            DATE: ${new Date(item.date).toLocaleDateString()}
                        </div>
                        <div class="flex gap-2">
                            <button onclick="reAnalyze(${index})" class="text-[10px] font-bold bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded-lg transition-all">
                                å†è§£æ
                            </button>
                            <button onclick="deleteEntry(${index})" class="text-[10px] font-bold bg-gray-900 border border-red-900/30 text-red-400/70 hover:bg-red-900/20 px-4 py-2 rounded-lg transition-all">
                                ç ´æ£„
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        } else {
            container.innerHTML = `
                <div class="text-center py-20">
                    <div class="text-4xl mb-4 opacity-20">ğŸ”¬</div>
                    <p class="text-gray-500 text-sm italic">
                        ã€Œã¾ã è¦³æ¸¬ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ãªã€‚<br>å¤–ã®ä¸–ç•Œã¸å‡ºã¦ã€ãƒã‚°ã‚’æ¢ã—ã¦ãã‚‹ã®ã§ã™ãï¼ã€
                    </p>
                </div>
            `;
        }
    }

    // å‰Šé™¤ã‚’å®Ÿè¡Œã™ã‚‹é–¢æ•°
    function deleteEntry(index) {
        if (confirm("ã“ã®å€‹ä½“ã®ç ”ç©¶ãƒ‡ãƒ¼ã‚¿ã‚’å®Œå…¨ã«ç ´æ£„ã—ã¾ã™ã‹ï¼Ÿ")) {
            collections.splice(index, 1);
            localStorage.setItem('gth_collections', JSON.stringify(collections));
            renderList();
        }
    }

    // å†è§£æï¼ˆçµæœç”»é¢ã¸æˆ»ã‚‹ï¼‰
    function reAnalyze(index) {
        const target = collections[index];
        localStorage.setItem('gth_nickname', target.nickname);
        localStorage.setItem('gth_tag', target.tag.replace(/ \/ /g, ',')); // å†…éƒ¨å½¢å¼ã«æˆ»ã™
        location.href = 'result.html';
    }

    // æœ€åˆã«ãƒªã‚¹ãƒˆã‚’è¡¨ç¤º
    renderList();
    </script>
</body>
</html>