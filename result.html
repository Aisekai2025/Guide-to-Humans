<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>分析結果 | Guide to Humans</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0d1117; color: #e6edf3; }
        .emerald-glow { text-shadow: 0 0 10px #10b981; }
        .result-card { background: rgba(16, 185, 129, 0.05); border: 1px solid rgba(16, 185, 129, 0.2); }
    </style>
</head>
<body class="p-6 max-w-md mx-auto">
    <header class="mb-8 text-center">
        <h2 class="text-emerald-400 text-sm font-bold tracking-widest uppercase mb-1">Analysis Complete</h2>
        <h3 id="nickname-display" class="text-2xl font-bold border-b-2 border-emerald-500 inline-block pb-1">個体：---</h3>
    </header>

    <main class="space-y-6">
        <!-- ワタクシの第一声 -->
        <section class="result-card p-4 rounded-2xl relative">
            <div class="absolute -top-3 left-4 bg-[#0d1117] px-2 text-xs text-emerald-400 font-bold">The Guide's Voice</div>
            <p id="first-voice" class="text-lg leading-relaxed italic">「解析中...少々お待ちを...」</p>
        </section>

        <!-- 攻略のヒント -->
        <section>
            <h4 class="text-emerald-400 font-bold mb-3 flex items-center">
                <span class="mr-2">💡</span> 攻略のヒント
            </h4>
            <div id="conquest-hints" class="space-y-3">
                <!-- ヒントがここに入る -->
            </div>
        </section>

        <!-- 観察ポイント -->
        <section class="bg-gray-900/50 p-4 rounded-xl border border-gray-700">
            <h4 class="text-emerald-400 font-bold mb-2 flex items-center text-sm">
                <span class="mr-2">🔍</span> 観察ポイント
            </h4>
            <ul id="observation-points" class="text-sm space-y-2 list-disc list-inside text-gray-400">
                <!-- ポイントがここに入る -->
            </ul>
        </section>
    </main>

    <footer class="mt-10 space-y-3">
        <button onclick="location.href='index.html'" class="w-full py-3 bg-emerald-600 hover:bg-emerald-500 text-white font-bold rounded-xl shadow-lg transition-all active:scale-95">
            図鑑に保存して戻る
        </button>
        <button onclick="history.back()" class="w-full py-2 text-gray-500 text-sm hover:text-emerald-400 transition-colors">
            再解析（入力をやり直す）
        </button>
    </footer>

    <script>
    // 前の画面（register.html）からデータを受け取る（本来はlocalStorageなどを使用）
    // 今回はデモとして、ランダムに選ばれたタグに応じた回答を生成するロジックですな
    
    const adviceDatabase = {
    "音量バグ": {
        first: "おやおや、鼓膜の予備が必要な個体ですな！",
        hint: "相手の声が大きくなった時は、心のボリュームノブを左に回したまえ。物理的な距離を50cmとるのも有効ですぞ。",
        obs: "どんな単語を口にした時に音量が跳ね上がるか、トリガーを特定できれば君の勝ちですぞ。"
    },
    "要約禁止": {
        first: "話の終わりが見えない、迷宮のような個体ですな。",
        hint: "話を聞きながら、心の中で『今日の献立』を考える並列処理スキルを磨きたまえ。相槌のタイミングだけは外さないのがコツですな。",
        obs: "話が脱線してから元に戻るまでの時間を計測したまえ。新記録が出れば拍手ですぞ。"
    },
    "正論パンチ": {
        first: "ぐうの音も出ない正論を放つ、高火力な個体ですな！",
        hint: "正論は『正しい』だけで『楽しい』とは限りませんぞ。まともに食らわず、『教科書のような意見ですな！』と横にかわしたまえ。",
        obs: "相手が正論を言っている時の『ドヤ顔』の角度を観察したまえ。45度が標準ですぞ。"
    },
    "低気圧に弱い": {
        first: "空模様と心模様がリンクしている、繊細な個体ですな。",
        hint: "雨の日は『システムの動作が重い日』と割り切りたまえ。無理に動かそうとせず、遠くから見守るのが一流のエンジニアですな。",
        obs: "気圧計と相手の機嫌の相関グラフを作ってみたまえ。天気予報より当たるかもしれんぞ。"
    },
    "褒め殺し弱点": {
        first: "称賛を浴びると、全ての防壁が崩壊する素直な個体ですな。",
        hint: "何かをお願いしたい時は、まず相手の靴の輝きや、ペンの持ち方を褒めたまえ。OSが驚くほど滑らかに動くはずですぞ。",
        obs: "褒められた時に、照れ隠しでどんな不自然な動きをするか、その『挙動』を記録したまえ。"
    },
    "空腹暴走": {
        first: "エネルギー残量に機嫌が左右される、燃費の悪い個体ですな。",
        hint: "この個体が牙を剥いたら、それは攻撃ではなく『給油サイン』ですぞ。何かを食べさせるまで、重要な話は厳禁ですな。",
        obs: "お腹が鳴ってから怒り出すまでの『カウントダウン時間』を測定したまえ。"
    },
    "レアキャラ": {
        first: "出現率が極めて低い、伝説級の個体を発見されましたな！",
        hint: "無理に捕獲（会話）しようとせず、遠くからその生態を拝むのがマナーですな。出会えただけで、今日の君の運勢は最高ですぞ。",
        obs: "次に現れる場所を予想したまえ。予測が当たれば君もレアキャラの仲間入りですな。"
    },
    "充電切れ": {
        first: "夕方になるとシステムがダウンする、分かりやすい個体ですな。",
        hint: "電池残量が赤い時は、思考回路がショートしています。難しい話は避け、そっとシャットダウン（帰宅）させてあげたまえ。",
        obs: "あくびが3回続いたら『残り1%』の合図ですな。見逃してはいけませんぞ。"
    },
    "ツンデレ": {
        first: "表面の冷気と内側の熱気が矛盾している、高難度な個体ですな。",
        hint: "厳しい言葉は『挨拶』、その後のわずかな沈黙が『本音』ですな。言葉の額面通りに受け取らない高度な翻訳スキルが試されますぞ。",
        obs: "突き放した後に、こっそりこちらを気にしている『視線のバグ』を検知したまえ。"
    },
    "マイペース": {
        first: "自分専用の時計で生きている、独立独歩な個体ですな。",
        hint: "君の時計に合わせようとすると、君のシステムが故障しますぞ。『あちらは別の時間軸にいるのだ』と割り切って、流れに身を任せたまえ。",
        obs: "周囲がパニックになっている時に、その個体だけがどれほど落ち着いているか、その温度差を楽しみたまえ。"
    },
    "夜行性": {
        first: "太陽が沈んでからシステムが最適化される、月光駆動型の個体ですな。",
        hint: "午前中のその個体は『スリープモード』ですぞ。重要なミッションは、日が暮れてエンジンの回転が上がってから依頼したまえ。",
        obs: "午後8時を過ぎた瞬間に、目の輝きがどれほど増すか。その『起動スイッチ』を特定したまえ。"
    },
    "社交的": {
        first: "周囲のネットワークと常時接続されている、高出力な通信型個体ですな！",
        hint: "情報の拡散スピードが速いですぞ。秘密のデータは、暗号化（内緒話）して伝えるより、そもそも入力しないのが安全ですな。",
        obs: "一度に何人の個体と同時並行で通信（会話）できるか。その『最大同時接続数』を計測したまえ。"
    },
    "内向的": {
        first: "内部サーバーで深い演算を行っている、静かなるプロセッサ個体ですな。",
        hint: "返信が遅いのはフリーズしているのではなく、最高の回答を『構築中』なのですな。再起動（急かすこと）をせず、じっくり待つのがマナーですぞ。",
        obs: "一言発した後の、安堵のため息。そのわずかな『排熱処理』を見逃してはいけませんな。"
    },
    "感情豊か": {
        first: "喜怒哀楽の振れ幅がダイナミックな、高解像度モニターのような個体ですな！",
        hint: "言葉の内容よりも、その時の『色（表情）』を見たほうが正確なデータが取れますぞ。今は『嵐モード』だと思えば、雷が落ちても怖くありませんな。",
        obs: "笑いながら泣くといった、高度な『マルチレイヤー表示』が起きていないか観察したまえ。"
    },
    "クール": {
        first: "常に冷却システムが作動している、氷結仕様の個体ですな。",
        hint: "冷たく見えるのは『安定動作』の証ですぞ。無理に熱くさせようとせず、その静寂な空間を共有するだけで、君の知性も研ぎ澄まされるはずですな。",
        obs: "そんな個体が、ふとした瞬間に見せる『0.1秒の微笑み』。これこそがこの図鑑の激レアデータですぞ！"
    },
    "天然": {
        first: "常識のプロトコルを無視して動く、独自のOSを搭載した個体ですな！",
        hint: "予測不可能な挙動こそがこの個体の『正常動作』ですぞ。『なんでそうなる！？』とツッコむのではなく、『そうきたか！』と楽しむのが正解ですな。",
        obs: "言い間違いや勘違いが、奇跡的に正解へ繋がる瞬間。その『バグの芸術』を記録したまえ。"
    },
    "せっかち": {
        first: "クロック周波数が異常に高い、超高速処理型の個体ですな！",
        hint: "この個体の前では、結論から話すのが鉄則ですな。前置きが長いと、相手のシステムがタイムアウト（イライラ）を起こしますぞ。",
        obs: "エレベーターの『閉』ボタンを連打する回数を数えたまえ。その速さが個体の戦闘力ですな。"
    },
    "のんびり屋": {
        first: "時間の流れを独自に減速させている、省エネ特化型の個体ですな。",
        hint: "急かしても加速はしません。むしろ、君がその個体のゆったりしたリズムに同期してみたまえ。世界が平和に見えてくる魔法のバグですな。",
        obs: "周囲が走っている中で、その個体だけがどれほど優雅に歩いているか。その『時間軸のズレ』を楽しみたまえ。"
    }
};


    // 【修正】ストレージからニックネームを取得するのです！
const storedNickname = localStorage.getItem('gth_nickname') || "解析不能個体";
const selectedTag = localStorage.getItem('gth_tag')?.split(',')[0] || "音量バグ"; // 最初のタグを使用

const data = adviceDatabase[selectedTag] || adviceDatabase["音量バグ"];

// 画面への反映（ここを修正！）
document.getElementById('nickname-display').textContent = `個体：${storedNickname}`;
document.getElementById('first-voice').textContent = data.first;

    
    const hintsContainer = document.getElementById('conquest-hints');
    const div = document.createElement('div');
    div.className = "bg-emerald-900/10 p-3 rounded-lg border-l-4 border-emerald-500 text-sm leading-relaxed";
    div.textContent = data.hint;
    hintsContainer.appendChild(div);

    const obsContainer = document.getElementById('observation-points');
    const li = document.createElement('li');
    li.textContent = data.obs;
    obsContainer.appendChild(li);
</script>

</body>
</html>
