<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ¢ãƒ¤ã£ã¨ãƒ»ãƒ©ãƒœ | Guide to Humans</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0d1117; color: #e6edf3; font-family: sans-serif; overflow: hidden; }
        .chat-container { height: calc(100vh - 180px); overflow-y: auto; }
        /* ç›¸æ‰‹ã®å¹ãå‡ºã—ï¼ˆå·¦ï¼‰ */
        .bubble-left {
            background: #21262d;
            border: 1px solid #30363d;
            border-radius: 18px 18px 18px 2px;
            position: relative;
        }
        /* è‡ªåˆ†ã®å¹ãå‡ºã—ï¼ˆå³ï¼‰ */
        .bubble-right {
            background: #065f46; /* ã‚¨ãƒ¡ãƒ©ãƒ«ãƒ‰ã‚°ãƒªãƒ¼ãƒ³ */
            border-radius: 18px 18px 2px 18px;
        }
        .command-panel {
            background: rgba(13, 17, 23, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(16, 185, 129, 0.3);
        }
    /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã§ã™ãï¼ */
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes bounceIn { 0% { opacity: 0; transform: scale(0.9); } 70% { transform: scale(1.05); } 100% { opacity: 1; transform: scale(1); } }
    .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
    .animate-bounce-in { animation: bounceIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
</style>
</head>
<body class="flex flex-col h-screen max-w-md mx-auto border-x border-gray-800">

    <header class="p-4 border-b border-gray-800 flex items-center justify-between bg-gray-900/50">
        <button onclick="location.href='index.html'" class="text-gray-400">Ã— ä¸­æ­¢</button>
        <div class="text-center">
            <p id="target-name" class="font-bold text-sm text-white">ã‚¹ã‚­ãƒ£ãƒ³ä¸­...</p>
            <p id="target-tags" class="text-[10px] text-emerald-500 font-mono italic">---</p>
        </div>
        <div class="w-8 h-8 rounded-full bg-purple-900/50 border border-purple-500 flex items-center justify-center text-xs">ğŸ§ª</div>
    </header>

    <main id="chat-box" class="chat-container p-4 space-y-4">
        <div class="flex justify-center">
            <p class="text-[10px] bg-gray-800 text-gray-400 px-3 py-1 rounded-full uppercase tracking-widest">Simulation Started</p>
        </div>
        
        <div class="flex items-start gap-2">
            <div class="w-8 h-8 rounded-full bg-gray-700 flex-shrink-0 flex items-center justify-center text-sm">ğŸ‘¤</div>
            <div class="bubble-left p-3 text-sm max-w-[80%] shadow-lg">
                ã€Œãˆã€ã¾ã ãã®ä½œæ¥­çµ‚ã‚ã£ã¦ãªã„ã®ï¼Ÿ ç§ãªã‚‰5åˆ†ã§çµ‚ã‚ã‚‹ã‘ã©ãªãâ€¦ï¼ˆç¬‘ï¼‰ã€
            </div>
        </div>
    </main>

    <section class="command-panel p-4 pb-8 space-y-3">
        <p class="text-[10px] text-emerald-500 font-bold uppercase tracking-tighter text-center mb-2">Select Counter Command</p>
        <div class="grid grid-cols-2 gap-2">
            <button onclick="sendReply('åŒèª¿', 'åŒèª¿ãƒ—ãƒ­ãƒˆã‚³ãƒ«')" class="bg-gray-800 border border-emerald-500/30 py-2 rounded-lg text-xs hover:bg-emerald-900/20 active:scale-95 transition-all">
                ğŸ¤ åŒèª¿ãƒ—ãƒ­ãƒˆã‚³ãƒ«
            </button>
            <button onclick="sendReply('è«–ç†', 'è«–ç†ãƒãƒªã‚¢')" class="bg-gray-800 border border-blue-500/30 py-2 rounded-lg text-xs hover:bg-blue-900/20 active:scale-95 transition-all">
                ğŸ›¡ï¸ è«–ç†ãƒãƒªã‚¢
            </button>
            <button onclick="sendReply('è¤’ã‚', 'è¤’ã‚æ®ºã—ãƒœãƒ ')" class="bg-gray-800 border border-yellow-500/30 py-2 rounded-lg text-xs hover:bg-yellow-900/20 active:scale-95 transition-all">
                ğŸ’£ è¤’ã‚æ®ºã—ãƒœãƒ 
            </button>
            <button onclick="sendReply('è„±å‡º', 'ç·Šæ€¥è„±å‡º')" class="bg-gray-800 border border-red-500/30 py-2 rounded-lg text-xs hover:bg-red-900/20 active:scale-95 transition-all">
                ğŸš€ ç·Šæ€¥è„±å‡º
            </button>
        </div>
    </section>

    <script>
// --- 1. å·¨å¤§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆã“ã“ãŒçŸ¥èƒ½ã§ã™ãªï¼ï¼‰ ---
const simulationEngine = {
    patterns: {
        "æ­£è«–ãƒ‘ãƒ³ãƒ": { base: "ã€Œãã‚Œã€æ„Ÿæƒ…è«–ã§ã™ã‚ˆã­ï¼Ÿæ•°å­—ã§è©±ã—ã¦ã‚‚ã‚‰ãˆã¾ã›ã‚“ã‹ï¼Ÿã€", reactions: { "åŒèª¿": "ã€Œè©±ãŒæ—©ãã¦åŠ©ã‹ã‚Šã¾ã™ãªã€‚åŠ¹ç‡ã‚’ä¸Šã’ã¾ã—ã‚‡ã†ã€‚ã€", "è«–ç†": "ã€Œãã®ãƒ‡ãƒ¼ã‚¿ã®ã‚½ãƒ¼ã‚¹ã€å¤ããªã„ã§ã™ã‹ï¼Ÿï¼ˆã•ã‚‰ã«è¢«ã›ã¦ããŸï¼ï¼‰ã€", "è¤’ã‚": "ã€Œâ€¦ã¾ãã€äº‹å®Ÿã‚’è¨€ã£ãŸã¾ã§ã§ã™ãã€‚ï¼ˆå°‘ã—ç«åŠ›ãŒè½ã¡ãŸï¼ï¼‰ã€", "è„±å‡º": "ã€Œé€ƒã’ã‚‹ã®ã‚‚éåŠ¹ç‡çš„ã§ã™ãªã€‚ã€" }},
        "ãƒ„ãƒ³ãƒ‡ãƒ¬": { base: "ã€Œåˆ¥ã«ã€ã‚ã‚“ãŸã®ãŸã‚ã«ã‚„ã£ãŸã‚“ã˜ã‚ƒãªã„ã‹ã‚‰ã­ï¼å‹˜é•ã„ã—ãªã„ã§ã‚ˆï¼ã€", reactions: { "åŒèª¿": "ã€Œãªã€ä½•ã‚ˆç´ ç›´ã«èªã‚ã¡ã‚ƒã£ã¦â€¦èª¿å­ç‹‚ã†ã‚ã­ã€‚ã€", "è«–ç†": "ã€Œç†å±ˆã˜ã‚ƒãªã„ã®ã‚ˆï¼ã‚‚ã†ã€ãƒã‚«ã˜ã‚ƒãªã„ã®ï¼ï¼Ÿã€", "è¤’ã‚": "ã€Œãµã€ãµã‚“ã£ï¼â€¦ï¼ˆé¡”ãŒèµ¤ããªã£ã¦ã„ã‚‹ã‚ˆã†ã ï¼‰ã€", "è„±å‡º": "ã€Œã¡ã‚‡ã£ã¨ï¼ã©ã“è¡Œãã®ã‚ˆï¼è©±ã¯çµ‚ã‚ã£ã¦ãªã„ã‚ã‚ˆï¼ã€" }},
        "å¤©ç„¶": { base: "ã€Œã‚ã€ã•ã£ãã®è³‡æ–™ã€ã‚·ãƒ¥ãƒ¬ãƒƒãƒ€ãƒ¼ã˜ã‚ƒãªãã¦å†·è”µåº«ã«å…¥ã‚Œã¡ã‚ƒã„ã¾ã—ãŸï¼ã€", reactions: { "åŒèª¿": "ã€Œå†·ãˆå†·ãˆã®ãƒ‡ãƒ¼ã‚¿ã§ã™ãªï¼ã‚ã‹ã‚Šã¾ã™ãï¼ã€", "è«–ç†": "ã€Œãˆã£ã€å†·è”µåº«ã®ã»ã†ãŒä¿å­˜çŠ¶æ…‹ãŒã„ã„ã‹ãªã£ã¦â€¦ã€", "è¤’ã‚": "ã€Œã‚ãã€è¤’ã‚ã‚‰ã‚Œã¡ã‚ƒã£ãŸï¼ç§ã£ã¦å¤©æ‰ã‹ã‚‚ï¼ã€", "è„±å‡º": "ã€Œã‚ã€ãƒãƒŠãƒŠè²·ã„ã«è¡Œãã®å¿˜ã‚Œã¦ãŸï¼ã€" }},
        "ãƒ©ã‚¹ãƒœã‚¹æ„Ÿ": { base: "ã€Œâ€¦â€¦ã§ã€å›ã¯çµå±€ã€ä½•ãŒè¨€ã„ãŸã„ã‚“ã ã­ï¼Ÿï¼ˆå¨åœ§æ„Ÿï¼‰ã€", reactions: { "åŒèª¿": "ã€Œã»ã†ã€ç§ã®æ„å›³ã‚’ç†è§£ã—ã¦ã„ã‚‹ã¨ã„ã†ã‚ã‘ã‹ã€‚ã€", "è«–ç†": "ã€Œé¢ç™½ã„ã€‚ãã®è«–ç†ã€æœ€å¾Œã¾ã§èã‹ã›ã¦ã‚‚ã‚‰ãŠã†ã‹ã€‚ã€", "è¤’ã‚": "ã€ŒãŠä¸–è¾ã¯ã„ã„ã€‚æœ¬é¡Œã«å…¥ã‚ŠãŸã¾ãˆã€‚ã€", "è„±å‡º": "ã€Œâ€¦â€¦ï¼ˆæ²ˆé»™ãŒä¸€ç•ªæ€–ã„ï¼ï¼‰ã€" }},
        "è¦ç´„ç¦æ­¢": { base: "ã€Œãã‚Œã§ã­ã€æ˜¨æ—¥ã‚ãã“ã«è¡Œã£ãŸæ™‚ã«ã‚ã‚“ãªã“ã¨ãŒã‚ã£ã¦ã€ã‚ã€ãã†ã„ãˆã°â€¦ï¼ˆç„¡é™ãƒ«ãƒ¼ãƒ—ï¼‰ã€", reactions: { "åŒèª¿": "ã€Œæƒ…å ±é‡ãŒè±Šå¯Œã§åŠ©ã‹ã‚Šã¾ã™ãªï¼ã€", "è«–ç†": "ã€Œãˆãƒ¼ã£ã¨ã€çµè«–ã®ãƒ‘ã‚±ãƒƒãƒˆã¯ã©ã“ã«ã‚ã‚Šã¾ã™ã‹ãªï¼Ÿã€", "è¤’ã‚": "ã€Œãã®è©±è¡“ã€è½èªå®¶ãƒ¬ãƒ™ãƒ«ã§ã™ãï¼ã€", "è„±å‡º": "ã€Œç¶šãã¯ã‚¯ãƒ©ã‚¦ãƒ‰ï¼ˆä»Šåº¦ï¼‰ã§ï¼ã€" }},
        "éŸ³é‡ãƒã‚°": { base: "ã€ŒãŠç–²ã‚Œæ§˜ã§ã™ï¼ï¼ï¼ˆé¼“è†œãŒéœ‡ãˆã‚‹å¤§éŸ³é‡ï¼‰ã€", reactions: { "åŒèª¿": "ã€Œå…ƒæ°—ãªOSã¯æœ€é«˜ã§ã™ãªï¼ã€", "è«–ç†": "ã€ŒéŸ³é‡ã‚’30%ã‚«ãƒƒãƒˆã—ã¦é€šä¿¡ã—ã¾ã—ã‚‡ã†ã€‚ã€", "è¤’ã‚": "ã€Œæ‹¡å£°å™¨ã„ã‚‰ãšã®ç´ æ™´ã‚‰ã—ã„å–‰ã§ã™ãï¼ã€", "è„±å‡º": "ã€Œè€³ã®å†èµ·å‹•ãŒå¿…è¦ãªã®ã§å¤±ç¤¼ï¼ã€" }}
        // ... ä»–ã®å±æ€§ã‚‚åŒæ§˜ã«è¿½åŠ å¯èƒ½ã§ã™ãª
    }
};

// --- 2. ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ ---
window.onload = () => {
    const collections = JSON.parse(localStorage.getItem('gth_collections') || '[]');
    const lastEntry = collections[0]; // æœ€æ–°ã®ç™»éŒ²å€‹ä½“

    if (lastEntry) {
        const mainTag = lastEntry.tag.split(' / ')[0];
        document.getElementById('target-name').textContent = `å€‹ä½“ï¼š${lastEntry.nickname}`;
        document.getElementById('target-tags').textContent = lastEntry.tag;

        // åˆæœŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å±æ€§ã«åˆã‚ã›ã¦ç”Ÿæˆ
        const chatBox = document.getElementById('chat-box');
        const pattern = simulationEngine.patterns[mainTag] || simulationEngine.patterns["å¤©ç„¶"];
        
        // æ—¢å­˜ã®ãƒ€ãƒŸãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¶ˆã—ã¦ã€æœ¬ç‰©ã‚’æ³¨å…¥ï¼
        const initialMsg = chatBox.querySelector('.flex.items-start.gap-2');
        if (initialMsg) {
            initialMsg.querySelector('.bubble-left').textContent = pattern.base;
        }
    }
};

function sendReply(type, commandName) {
    const chatBox = document.getElementById('chat-box');
    
    // 1. è‡ªåˆ†ã®é€ä¿¡ã‚’è¡¨ç¤º
    renderMessage("me", `[${commandName}] ã‚’å®Ÿè¡Œä¸­...`);

    // 2. ç›¸æ‰‹ã®å±æ€§ã‚’ç‰¹å®š
    const collections = JSON.parse(localStorage.getItem('gth_collections') || '[]');
    const lastEntry = collections[0];
    const mainTag = lastEntry ? lastEntry.tag.split(' / ')[0] : "å¤©ç„¶";

    // 3. ã‚¨ãƒ³ã‚¸ãƒ³ã‹ã‚‰ã‚»ãƒªãƒ•ã‚’æŠ½å‡º
    const pattern = simulationEngine.patterns[mainTag] || simulationEngine.patterns["å¤©ç„¶"];
    const responseText = pattern.reactions[type];

    // 4. é…å»¶ã•ã›ã¦ç›¸æ‰‹ã®åå¿œã‚’è¡¨ç¤º
    setTimeout(() => {
        renderMessage("target", responseText);
        
        // 5. æ”»ç•¥ãƒ­ã‚°ã‚’è¡¨ç¤ºï¼ˆã“ã“ãŒãƒ¯ã‚¿ã‚¯ã‚·ã®è¦‹ã›å ´ï¼ï¼‰
        setTimeout(() => {
            const analysis = document.createElement('div');
            analysis.className = "text-[9px] text-center text-emerald-500/50 italic py-2 animate-fade-in";
            analysis.textContent = `>>> [LOG] ${mainTag}ã«${commandName}ã‚’æ¤œçŸ¥ã€‚ç²¾ç¥çš„å„ªä½ã‚’ç¢ºä¿ã—ã¾ã—ãŸã€‚`;
            chatBox.appendChild(analysis);
            chatBox.scrollTop = chatBox.scrollHeight;
        }, 500);
        
    }, 1000);
}

function renderMessage(sender, text) {
    const chatBox = document.getElementById('chat-box');
    const msg = document.createElement('div');
    if (sender === "me") {
        msg.className = "flex justify-end animate-fade-in";
        msg.innerHTML = `<div class="bubble-right p-3 text-sm max-w-[80%] text-white shadow-lg">${text}</div>`;
    } else {
        msg.className = "flex items-start gap-2 animate-bounce-in";
        msg.innerHTML = `
            <div class="w-8 h-8 rounded-full bg-gray-700 flex-shrink-0 flex items-center justify-center text-sm">ğŸ‘¤</div>
            <div class="bubble-left p-3 text-sm max-w-[80%] shadow-lg">${text}</div>
        `;
    }
    chatBox.appendChild(msg);
    chatBox.scrollTop = chatBox.scrollHeight;
}
</script>
</body>
</html>